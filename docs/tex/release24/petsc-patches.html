<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.03 [en] (X11; U; SunOS 5.5.1 sun4u) [Netscape]">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" VLINK="#FF0000" ALINK="#FF0000">

<H3>
Patches for PETSc (Release 2.0.22)</H3>

<HR> You can apply all the general patches by obtaining 
<a href="ftp://info.mcs.anl.gov/pub/petsc/petsc-patches.tar.gz">petsc-patches.tar.gz</a> and 
extracting it with 
<pre>
cd $PETSC_DIR ; gunzip -c petsc-patches.tar.gz | tar xf -
</pre>
Make sure you are in the PETSc directory (for example /home/bsmith/petsc-2.0.22) before
you run the tar command.
Or you can obtain the files below one at a time and bring them over manually.


<HR>Updates for: <B><FONT COLOR="#993399">Mon Mar 8 1999&nbsp;</FONT></B>&nbsp;
<HR><H3> All machines Using LSQR</H3>
Get the updated version of:
<a href="http://www.mcs.anl.gov/petsc/src/ksp/impls/lsqr/lsqr.c">src/ksp/impls/lsqr/lsqr.c</a>


<HR>Updates for: <B><FONT COLOR="#993399">Wed Feb 25 1999&nbsp;</FONT></B>&nbsp;
<HR><H3> All machines</H3>
Get the updated version of:
<a href="http://www.mcs.anl.gov/petsc/src/mat/matimpl.h">src/mat/matimpl.h</a> and
<a href="http://www.mcs.anl.gov/petsc/src/mat/utils/stash.c">src/mat/utils/stash.c</a>. 
This fix improves the performance of Matrix Assembly in the case of off-processor values.


<HR>Updates for: <B><FONT COLOR="#993399">Wed Feb 17 1999&nbsp;</FONT></B>&nbsp;
<HR><H3> All machines</H3>
Get the updated version of:
<a href="http://www.mcs.anl.gov/petsc/src/mat/impls/aij/mpi/mpiaij.c">
src/mat/impls/mpi/mpiaij.c</a>. This Fixes the problem in using MatGetSubMatrix().


<HR>Updates for: <B><FONT COLOR="#993399">Mon Feb  8, 1999&nbsp;</FONT></B>&nbsp;<HR>
<H3>Using <A HREF="http://dsg.dei.uc.pt/~fafe/w32mpi/">WMPI</A> on  Windows NT/95 </H3>
Get the updated version of:
<a href="http://www.mcs.anl.gov/petsc/bmake/nt/petscconf.h">bmake/nt/petscconf.h</a>

Also change MPI info in bmake/base.site to
<pre>
MPI_INCLUDE    = /Ic:\software\wmpi1.2\include
MPI_LIB        = cdv_cref_nomixed_libf.lib cwmpi_cref_nomixed.lib
LIB           = $(LIB);c:\software\wmpi1.2\lib\console
</pre>
Also make sure you get the updated version of 
<a href="http://www.mcs.anl.gov/petsc/bmake/nt/base">bmake/nt/base</a> file.
Now rebuild the PETSc libraries.

<HR><H3> All machines </H3>
Get the updated version of:
<a href="http://www.mcs.anl.gov/petsc/src/pc/impls/eisens/eisen.c">src/pc/impls/eisens/eisen.c</a>



<HR>Updates for: <B><FONT COLOR="#993399">Tue Dec 15, 1998&nbsp;</FONT></B>&nbsp;<HR>
<H3> All machines </H3>
Get the updated version of:
<a href="http://www.mcs.anl.gov/petsc/src/draw/impls/x/xinit.c">src/draw/impls/x/xinit.c</a>

<HR>Updates for: <B><FONT COLOR="#993399">Tue Dec 1, 1998&nbsp;</FONT></B>&nbsp;<HR>
<H3> All machines </H3>
Bug in inode version of factorization routine for SeqAIJ matrix type.To fix this, get
the updated versions of:
<a href="http://www.mcs.anl.gov/petsc/src/mat/impls/aij/seq/aijfact.c">src/mat/impls/aij/seq/aijfact.c</a> and
<a href="http://www.mcs.anl.gov/petsc/src/mat/impls/aij/seq/aijnode.c">src/mat/impls/aij/seq/aijnode.c</a>

<HR>Updates for: <B><FONT COLOR="#993399">Thu Sept 17, 1998&nbsp;</FONT></B>&nbsp;<HR>
<H3> All machines </H3>
Get the updated versions of 
<a href="http://www.mcs.anl.gov/petsc/src/mat/impls/dense/mpi/mpidense.c">src/mat/impls/dense/mpi/mpidense.c</a> and
<a href="http://www.mcs.anl.gov/petsc/src/mat/impls/dense/mpi/mmdense.c">src/mat/impls/dense/mpi/mmdense.c</a>

<HR>Updates for: <B><FONT COLOR="#993399">Tue June 10, 1998&nbsp;</FONT></B>&nbsp;<HR>
<H3>All machines</H3>

Get a fresh copy of 
<a href="http://www.mcs.anl.gov/petsc/src/vec/interface/vector.c">src/vec/interface/vector.c</a>


<HR>Updates for: <B><FONT COLOR="#993399">Thu May  21, 1998&nbsp;</FONT></B>&nbsp;<HR>
<H3>Using MPIUNI on IRIX/IRIX64</H3>
Error compiling examples
<pre>
ld32: ERROR 33: Unresolved text symbol "PetscGetTime" - 1st referenced by 
/r/win180/u/wk/biegel/prophet/petsc-2.0.22/lib/libg/IRIX/libmpiuni.a(mpi.o).
ld32: ERROR 33: Unresolved text symbol "PetscMemcpy" - 1st referenced by 
/r/win180/u/wk/biegel/prophet/petsc-2.0.22/lib/libg/IRIX/libmpiuni.a(mpi.o).
ld32: ERROR 33: Unresolved data symbol "PetscErrorPrintf" - 1st referenced by 
/r/win180/u/wk/biegel/prophet/petsc-2.0.22/lib/libg/IRIX/libmpiuni.a(mpi.o).
</pre>
To fix this error, edit bmake/IRIX[64]/base.site and change MPI_LIB to:
<pre>
MPI_LIB = ${PETSC_DIR}/lib/lib${BOPT}/${PETSC_ARCH}/libmpiuni.a -lpetscsys
</pre>

<HR>Updates for: <B><FONT COLOR="#993399">Tue May  19, 1998&nbsp;</FONT></B>&nbsp;
<HR>
<H3>All machines</H3>

Get fresh copies of 
<a href="http://www.mcs.anl.gov/petsc/src/sys/src/objects/options.c">
src/sys/src/objects/options.c</a> and
<a href="http://www.mcs.anl.gov/petsc/src/fortran/custom/zstart.c">
src/fortran/custom/zstart.c</a>

<HR>Updates for: <B><FONT COLOR="#993399">Fri May  15, 1998&nbsp;</FONT></B>&nbsp;
<HR>
<H3>All machines</H3>

Get fresh copies of 
<a href="http://www.mcs.anl.gov/petsc/src/mat/impls/baij/mpi/mpibaij.c">
src/mat/impls/baij/mpi/mpibaij.c</a>
<a href="http://www.mcs.anl.gov/petsc/src/mat/impls/dense/mpi/mpidense.c">
src/mat/impls/dense/mpi/mpidense.c</a>
<a href="http://www.mcs.anl.gov/petsc/src/mat/impls/bdiag/mpi/mpibdiag.c">
src/mat/impls/bdiag/mpi/mpibdiag.c</a>
<a href="http://www.mcs.anl.gov/petsc/src/mat/impls/rowbs/mpi/mpirowbs.c">
src/mat/impls/rowbs/mpi/mpirowbs.c</a>

<HR>Updates for: <B><FONT COLOR="#993399">Thu May  14, 1998&nbsp;</FONT></B>&nbsp;
<HR>
<H3> 
Warnings using MPIUNI with EGCS compiler on 64 bit machines</H3>

Get a fresh copy of 
<a href="http://www.mcs.anl.gov/petsc/src/sys/src/mpiuni/mpi.h">
src/sys/src/mpiuni/mpi.h</a>

<HR>
<H3>
Using Complex on Convex Exemplar</H3>
If you get link time errors when using BOPT=g_complex or O_complex, such as:
<pre>
/usr/ccs/bin/ld: Unsatisfied symbols:
   operator new(unsigned long) (code)
******
/usr/ccs/bin/ld: Unsatisfied symbols:
  __nw__FUl (code)
  __eh_dt_count_fn (code)
</pre>
To fix this problem, get the latest patch-fix to the Convex/HP compilers. The
reference to this patch is: C-PlusPlus_Patch_11.0.1.2

<HR>Updates for: <B><FONT COLOR="#993399">Wed May  13, 1998&nbsp;</FONT></B>&nbsp;
<HR>
<H3> 
Errors Building PETSc on HPUX-10.20</H3>

Get a fresh copy of 
<a href="http://www.mcs.anl.gov/petsc/src/sys/src/error/fp.c">
src/sys/src/error/fp.c</a> and

<a href="http://www.mcs.anl.gov/petsc/bmake/hpux/petscconf.h">
bmake/hpux/petscconf.h</a> 

<HR>Updates for: <B><FONT COLOR="#993399">Wed May  8, 1998&nbsp;</FONT></B>&nbsp;
<HR>
<H3>
Error building PETSc on solaris</H3>
<pre>
libfast in: /sandbox/balay/petsc/src/sys/src/dll
"/usr/include/stdlib.h", line 158: Error: This object was declared before with a different language.
1 Error(s) detected.
</pre>
Get a fresh copy of 
<a href="http://www.mcs.anl.gov/petsc/include/pinclude/petscfix.h">
include/pinclude/petscfix.h</a>

<HR>Updates for: <B><FONT COLOR="#993399">Wed May  6, 1998&nbsp;</FONT></B>&nbsp;
<HR>
<H3>
Using -trmalloc_off with BOPT=g on 64 bit machines (alpha, IRIX64, t3e) </H3>
Get a fresh copy of 
<a href="http://www.mcs.anl.gov/petsc/src/sys/src/memory/mtr.c">
src/sys/src/memory/mtr.c</a>

<HR>
<H3>
Using bin/petscarch on Cray T3D/T3E</H3>
Get a fresh copy of 
<a href="http://www.mcs.anl.gov/petsc/bin/petscarch">
bin/petscarch</a>


<HR>Updates for: <B><FONT COLOR="#993399">Mon May  4, 1998&nbsp;</FONT></B>&nbsp;
<HR>
<H3>
Windows NT/95, using fortran interface with Digital Visual Fortran</H3>
Get a fresh copy of 
<a href="http://www.mcs.anl.gov/petsc/bmake/nt/base">
bmake/nt/base</a>

<HR>
<H3>
All machines using .f fortran files</H3>
Get a fresh copy of 
<a href="http://www.mcs.anl.gov/petsc/bmake/common">
bmake/common</a>


<HR>Updates for: <B><FONT COLOR="#993399">Thu Apr 30, 1998&nbsp;</FONT></B>&nbsp;
<HR>
<H3>
Cray T3D/T3E Fortran complex number version does not compile</H3>
We have reported several compiler/linker bugs to Cray; but have no work
around until Cray provides suitable patches.
<P>
<HR>
<H3>
Solaris running OS 5.3</H3>
(an out-dated OS version) did not have prototype for gettimeofday(). To
fix this edit file include/pinclude/ptime.h line: 178 and replace
<PRE>#if defined(PARCH_sun4) &amp;&amp; defined(__cplusplus)</PRE>
with
<PRE>#if (defined(PARCH_sun4) ||&nbsp; defined(PARCH_solaris)) &amp;&amp; defined(__cplusplus)</PRE>

<HR>
<H3>
SunOS 4.1.3 using gcc, if all programs crash on start-up</H3>
Edit the file bmake/sun4/base and remove the flag -fPIC from the definition
of CC. E.g., use the following:
<PRE>CC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = gcc -D__USE_FIXED_PROTOTYPES__</PRE>
If installing PETSc using C++ or complex numbers, then remove the flag
-fPIC from the definition of CC in the files bmake/sun4/[base.g_complex,base.O_complex,base.g_c++,base.O_c++]
as well. Then reinstall. Please also send us email so we can try to determine
why this happens.

<P>
<HR>
<H3>
All machines: If using BlockSolve95 with c++ version of PETSc</H3>
Edit Blocksolve95/include/Bsdepend.h file and comment out the following
<PRE>/*&nbsp;
#if defined(__cplusplus)
extern "C" {
extern void *malloc(long unsigned int );
extern void free(void *);
extern int&nbsp; abs(int);
extern double fabs(double);
extern void srand(int);
extern int rand();
extern double drand48();
extern void srand48(long);
extern int exit(int);
}
#endif
*/</PRE>

<HR>
</BODY>
</HTML>
