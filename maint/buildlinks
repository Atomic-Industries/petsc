#! /bin/csh
# $Id: buildlinks,v 1.28 1998/11/12 16:24:50 balay Exp bsmith $ 

#
# Builds PETSc shadow directory.  This is used in conjunction with addlinks.
#

set shadowdir=$1
set petscdir=/home/bsmith/petsc

#
# If Shadow dir does'nt exist, create one.
#
if ( ! -d $shadowdir ) then 
  echo Creating $shadowdir 
  mkdir -p $shadowdir 
  chgrp petsc $shadowdir 
  chmod g+w $shadowdir 
  chmod g+s $shadowdir 
endif

cd $petscdir
#
#  remove all garabage from true petsc directory
#
# make ACTION=clean tree >>& /dev/null
#
find . \(  -name man -prune -o -name manualpages -prune \) \
        -o -type d -exec $petscdir/maint/addlinks $shadowdir \{\} \
         \; >>& /dev/null

#
# make links directly to docs/manualpages and src/mat/examples/matrices
#
if (! -e $shadowdir/docs/manualpages) then
        ln -s $petscdir/docs/manualpages $shadowdir/docs/manualpages
endif
if (! -e $shadowdir/src/mat/examples/matrices) then
        ln -s $petscdir/src/mat/examples/matrices $shadowdir/src/mat/examples/matrices 
endif

