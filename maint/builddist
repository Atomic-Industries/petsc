#! /bin/csh
# 
#  Makes distribution version of Petsc 2.0
#
echo "------- Have you done ALL of the following?? -----------------------------"
echo "(1) Built manpages, wwwpages, latexpages by running make allmanpages?"
echo "(2) Set the version number in manual_tex.tex, manual.tex, and intro.tex?"
echo "(3) Built the users manual (and intro) in .ps and .html?"
echo "(4) Set the version number and release date in petsc.h?"
echo "(5) Removed the option -u from BASEOPTF in bmake/sun4/base.g?"
echo "(6) Rebuilt and checked all Fortran stubs?"
echo "(7) Made sure that all *.f Fortran examples (snes/examples/ex10.f) run correctly?"
echo "(8) Made sure Fortran include files match C ones?"
#
if ($#argv == 1) then
  set version=$1
  echo "Building ~/petsc$version.tar"
else
  set version=""
endif
#
cd /home/bsmith/petsc
make ACTION=clean tree
#
/bin/rm -f ~/petsc
#
cd /home/bsmith
tar cFFXf /home/bsmith/petsc/maint/xclude ~/petsc.tar petsc
#
cd /mcs/tmp
tar xf ~/petsc.tar
chmod -R u+w petsc
/bin/rm -f ~/petsc.tar
mv petsc petsc$version
tar cf ~/petsc$version.tar petsc$version
/bin/rm -r -f /mcs/tmp/petsc$version

#
#  To test locally and build petsc.solid
#
# tar xf petsc$version.tar
# do chmod g+ws petsc$version
# do chgrp -R pdetools petsc$version
# do chmod -R g+w petsc$version
# Run du on petsc$version to make sure there is no garbage
# Test manpages and manual in petsc$version
# Do builds in petsc$version -- Remember that you must set
# PETSC_DIR in .cshrc to  point to petsc$version
#
# For local distribution, remember to make etags in petsc$version
#
# Put a .gz and .Z file in the ftp site.
# Add to petsc.html the current release and date (in Overview section)
# and to docs/tex/Releases




