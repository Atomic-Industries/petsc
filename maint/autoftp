#!/usr/local/bin/expect -f
# $Id: autoftp,v 1.12 1998/10/23 20:55:40 balay Exp bsmith $ 

#
#  automatically ftp's to a certain site and 
# drops off a file 
# 
# PETSc MCS passwd is now different from external PETSc passwds.
# mcs passwd: F67g23ah
#
#  nersc cray t3e password z9ab25
#
#  old passwords: F43z22gh, K23p66ai, Pzr92a8i, 1953bz24
# 
  set host     [lindex $argv 0]
  set user     [lindex $argv 1]
  set action   [lindex $argv 2]
  set file_in  [lindex $argv 3]
  set file_out [lindex $argv 4]

     spawn ftp
     expect {ftp>*}

     # ftp can take a while to open a connection initially
     set timeout 90
     send "open $host \r"
     expect {*Name*}
     send "$user\r"
     expect {*Password:}
     send "G88s43pe\r"
     expect {*ftp>*}
     # may be moving a large file 
     set timeout 2000
     send "binary \r"
     expect {*ftp>*}
     send "$action $file_in $file_out\r"
     expect {*ftp>*}
     send "quit\r"

