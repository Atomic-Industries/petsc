#! /bin/csh
#
# Generates petsc-patches.tar.gz file based on the list of files
# specified in docs/tex/petsc-patches-file-list.
# This generated tarfile should be copied over to
# the PETSc ftp directory.
#
# This command should be invoked from the scratch PETSC_DIR locaton
# where the current patches reside
#
## The tar utility used is gnutar
#
/bin/rm -f ~/petsc-patches.tar.gz ~/petscnt-patches.tar.gz 
grep '##' /home/bsmith/petsc/docs/tex/petsc-patches.html  | cut -d '>' -f 2 >! \
         /tmp/petsc-patches-file-list.tmp
gnutar --create -file ~/petsc-patches.tar --files-from /tmp/petsc-patches-file-list.tmp
/bin/rm -f /tmp/petsc-patches-file-list.tmp
gzip ~/petsc-patches.tar
chgrp petsc ~/petsc-patches.tar.gz
chmod g+w ~/petsc-patches.tar.gz

#clean up
cd ~/
/bin/rm -rf /tmp/petscpatchdir


