# $Id: common_variables,v 1.30 2001/03/27 22:17:30 balay Exp balay $ 
#
# PDIR (defined from $PETSC_DIR) determines where the PETSc libraries are built.
# LDIR defines location of libraries similar to PDIR. It can be reset by external packages like TAO.
# LDIR and PDIR will usually be identical for PETSc, and are different for 
# external packages that use the PETSc build system.
#
#    If you change PDIR in your makefile you MUST put it after the
#    include line
#
# LIBNAME       - library name
# SOURCE        - source files
# SSOURCE       - single precision versions of some source code
# OBJS          - object files
# SOBJS         - single precision versions of some object files
# PETSC_INCLUDE - locations of include files
# CPPFLAGS      - preprocessor flags for *.c, *.F preprocessing
# DOCS          - files that contain PETSc documentation, readmes etc.
# PETSC_PARCH   - corresponds to the PARCH_arch in the source files, set in 
#                 the file bmake/${PETSC_ARCH}/base
#
LDIR	       = ${PETSC_DIR}/lib/lib${BOPT}/${PETSC_ARCH}
PDIR	       = ${PETSC_DIR}/lib/lib${BOPT}/${PETSC_ARCH}
LIBNAME	       = ${LDIR}/${LIBBASE}.${LIB_SUFFIX}
SOURCE	       = ${SOURCEC} ${SOURCEF}
OBJS	       = ${OBJSC} ${OBJSF}
PETSC_INCLUDE  = -I'${PETSC_DIR}' -I'${PETSC_DIR}/bmake/${PETSC_ARCH}' -I'${PETSC_DIR}/include' \
	 ${MPI_INCLUDE} ${MPE_INCLUDE} ${AMS_INCLUDE} ${PETSC_BLASLAPACK_FLAGS}
CCPPFLAGS      = ${PETSC_INCLUDE} ${PCONF} ${PETSCFLAGS} ${PETSC_PARCH} ${CPPFLAGS} -D__SDIR__='"${LOCDIR}"'
FCPPFLAGS      = ${PETSC_INCLUDE} ${PCONF} ${PETSCFLAGS} ${PETSC_PARCH} ${FPPFLAGS}
C_SH_LIB_PATH  = ${CLINKER_SLFLAG}${PDIR} ${C_DYLIBPATH}
F_SH_LIB_PATH  = ${FLINKER_SLFLAG}${PDIR} ${F_DYLIBPATH}
#
# Defines all libraries needed for using linear and nonlinear solvers, 
# and all lower level PETSc components (such as vectors and matrices).
# The order of listing these libraries is important!
#

PETSC_EXTERNAL_LIB_BASIC = ${EXTERNAL_LIB} ${BLASLAPACK_LIB} ${MPI_LIB} ${SYS_LIB}
PETSC_SYS_LIB_BASIC      = -lpetsc 
PETSC_VEC_LIB_BASIC      = -lpetscvec ${PETSC_SYS_LIB_BASIC}
PETSC_MAT_LIB_BASIC      = -lpetscmat ${PETSC_VEC_LIB_BASIC}
PETSC_DM_LIB_BASIC       = -lpetscdm ${PETSC_MAT_LIB_BASIC}
PETSC_SLES_LIB_BASIC     = -lpetscsles ${PETSC_DM_LIB_BASIC}
PETSC_SNES_LIB_BASIC     = -lpetscsnes ${PETSC_SLES_LIB_BASIC}
PETSC_TS_LIB_BASIC       = -lpetscts ${PETSC_SNES_LIB_BASIC}
PETSC_LIB_BASIC          = ${PETSC_TS_LIB_BASIC}
PETSC_FORTRAN_LIB_BASIC  = -lpetscfortran
PETSC_CONTRIB_BASIC      = -lpetsccontrib

PETSC_SYS_LIB     = -L'${PDIR}' ${PETSC_SYS_LIB_BASIC} ${PETSC_EXTERNAL_LIB_BASIC}
PETSC_VEC_LIB     = -L'${PDIR}' ${PETSC_VEC_LIB_BASIC} ${PETSC_EXTERNAL_LIB_BASIC}
PETSC_MAT_LIB     = -L'${PDIR}' ${PETSC_MAT_LIB_BASIC} ${PETSC_EXTERNAL_LIB_BASIC}
PETSC_DM_LIB      = -L'${PDIR}' ${PETSC_DM_LIB_BASIC} ${PETSC_EXTERNAL_LIB_BASIC}
PETSC_SLES_LIB    = -L'${PDIR}' ${PETSC_SLES_LIB_BASIC} ${PETSC_EXTERNAL_LIB_BASIC}
PETSC_SNES_LIB    = -L'${PDIR}' ${PETSC_SNES_LIB_BASIC} ${PETSC_EXTERNAL_LIB_BASIC}
PETSC_TS_LIB      = -L'${PDIR}' ${PETSC_TS_LIB_BASIC} ${PETSC_EXTERNAL_LIB_BASIC}
PETSC_LIB         = -L'${PDIR}' ${PETSC_LIB_BASIC} ${PETSC_EXTERNAL_LIB_BASIC}
PETSC_FORTRAN_LIB = -L'${PDIR}' ${PETSC_FORTRAN_LIB_BASIC}
PETSC_CONTRIB     = -L'${PDIR}' ${PETSC_CONTRIB_BASIC}

#
# ---------------------------------------------------------------------------------------
#
# PCONF - indicates which OPTIONAL external packages are available at your site; appropriate
#         ones are defined in bmake/${PETSC_ARCH}/base.site (as are the library locations).
#         Ones that are not defined are ignored. You only need to edit this to add a new 
#         package that PETSc has never seen before. Never remove any of these, rather remove
#         them from the appropriate bmake/${PETSC_ARCH}/base.site
#
#
PCONF         = ${PETSC_HAVE_MPE}  ${PETSC_HAVE_BLOCKSOLVE} ${PETSC_HAVE_PVODE} ${PETSC_HAVE_PARMETIS} \
                ${PETSC_HAVE_AMS}  ${PETSC_HAVE_SPAI}       ${PETSC_HAVE_X11}   ${PETSC_HAVE_MATLAB_ENGINE} \
                ${PETSC_HAVE_ADIC} ${PETSC_HAVE_JAVA}       ${PETSC_HAVE_LUSOL} ${PETSC_HAVE_DSCPACK} \
                ${PETSC_HAVE_RAMG} ${PETSC_HAVE_MATLAB}     ${PETSC_HAVE_ESSL} 
EXTERNAL_LIB  = ${MPE_LIB}         ${BLOCKSOLVE_LIB}      ${PVODE_LIB}        ${PARMETIS_LIB} \
                ${AMS_LIB}         ${SPAI_LIB}            ${X11_LIB}          ${MATLAB_LIB}   \
                ${ADIC_LIB}        ${LUSOL_LIB}           ${RAMG_LIB}                         \
                ${DSCPACK_LIB}
#
# ----------------------------------------------------------------------------------------
#
#   Currently ignore this entry
#
PETSC_ADIC_LIB  = -L${PDIR} ${PETSC_LIB_BASIC} -lpetscblas -lmpiuni  ${EXTERNAL_LIB_BASIC}
#
# Some variables used to build shared libraries
SHLIBS   = libpetsccontrib libpetsc libpetscmat libpetscsles libpetscsnes libpetscts libpetscvec libpetscdm
SLSUFFIX = so
#
# The following include files set customized site, optimization, and version
# options.  Do NOT remove any of these include files.  You should generally
# need to edit only ${PETSC_DIR}/bmake/${PETSC_ARCH}/base.site to specify your
# particular machine configuration.  See the users manual for details.
#
include ${PETSC_DIR}/bmake/${PETSC_ARCH}/base.site
# (This line MUST be present for certain machines (e.g., Cray T3D))
include ${PETSC_DIR}/bmake/common_${BOPT}

