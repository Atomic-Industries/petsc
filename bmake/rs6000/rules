# $Id: base,v 1.43 2000/09/05 14:49:20 curfman Exp bsmith $ 
#
include ${PETSC_DIR}/bmake/${PETSC_ARCH}/base_variables
include ${PETSC_DIR}/bmake/common

libc:
	for i in ${OBJSC}; do ${OMAKE} BOPT=${BOPT} LIBNAME=${LIBNAME} libmember LIBMEMBER=$$i ; done

libf:
	for i in ${OBJSF}; do ${OMAKE} BOPT=${BOPT} libmember LIBMEMBER=$$i ; done

libmember:    ${LIBNAME}(${LIBMEMBER})
#########

# This F.f rule ensures that the old *.f files are removed.
#
.F.f:
	-${RM} $*.f __$*.c
	-${CP} $*.F __$*.c
	-${CC} ${FCPPFLAGS} -E  __$*.c | grep -v '^ *#' > $*.f
	-${RM} __$*.c

.F.o:
	-${RM} $*.f __$*.c
	-${CP} $*.F __$*.c
	-${CC} ${FCPPFLAGS} -E  __$*.c | grep -v '^ *#' > $*.f
	-${FC} -c ${FOPTFLAGS} ${FFLAGS} $*.f
	-${RM} $*.f __$*.c

.F.a:
	-${RM} $*.f __$*.c
	-${CP} $*.F __$*.c
	-${CC} ${FCPPFLAGS} -E  __$*.c | grep -v '^ *#' > $*.f
	-${FC} -c ${FOPTFLAGS} ${FFLAGS} $*.f
	-${AR} cr ${LIBNAME} $*.o
	-${RM} $*.f __$*.c

shared:

oshared:


