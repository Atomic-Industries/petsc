LOCDIR=tests/
EXAMPLESC = test_link1.c linesearch1.c
TESTEXAMPLES_C = test_link1.tao runtest_link1 test_link1.rm clean \
         test_linesearch1.tao runtest_linesearch1 test_linesearch1.rm \
         test_lmvmmat1.tao runtest_lmvmmat1 test_lmvmmat1.rm \
         test_rosenbrock1.tao runtest_rosenbrock1 test_rosenbrock1.rm \
         test_jbearing2.tao runtest_jbearing2 test_jbearing2.rm \
	 clean 


include ${TAO_DIR}/conf/tao_base

test_link1: test_link1.o tao_chkopts

test_link1f: test_link1f.o tao_chkopts
	-${FLINKER} -o test_link1f test_link1f.o ${TAO_LIB_FORTRAN} ${TAO_LIB} ${PETSC_LIB_FORTRAN} ${PETSC_LIB}
	${RM} test_link1f.o


test_subvec1: test_subvec1.o tao_chkopts
	-${CLINKER} -o test_subvec1 test_subvec1.o ${TAO_LIB} ${PETSC_LIB}
	${RM} test_subvec1.o

test_submat1: test_submat1.o tao_chkopts
	-${CLINKER} -o test_submat1 test_submat1.o ${TAO_LIB} ${PETSC_LIB}
	${RM} test_submat1.o


test_linesearch1: test_linesearch1.o tao_chkopts
	-${CLINKER} -o test_linesearch1 test_linesearch1.o ${TAO_LIB} ${PETSC_LIB}
	${RM} test_linesearch1.o

test_lmvmmat1: test_lmvmmat1.o tao_chkopts
	-${CLINKER} -o test_lmvmmat1 test_lmvmmat1.o ${TAO_LIB} ${PETSC_LIB}
	${RM} test_lmvmmat1.o

test_rosenbrock1: test_rosenbrock1.o tao_chkopts
	-${CLINKER} -o test_rosenbrock1 test_rosenbrock1.o ${TAO_LIB} ${PETSC_LIB}
	${RM} test_rosenbrock1.o

test_jbearing2: test_jbearing2.o tao_chkopts
	-${CLINKER} -o test_jbearing2 test_jbearing2.o ${TAO_LIB} ${PETSC_LIB}
	${RM} test_jbearing2.o

test_plate2: test_plate2.o tao_chkopts
	-${CLINKER} -o test_plate2 test_plate2.o ${TAO_LIB} ${PETSC_LIB}
	${RM} test_plate2.o

test_bratu2: test_bratu2.o tao_chkopts
	-${CLINKER} -o test_bratu2 test_bratu2.o ${TAO_LIB} ${PETSC_LIB}
	${RM} test_bratu2.o

test_chwirut1: test_chwirut1.o tao_chkopts
	-${CLINKER} -o test_chwirut1 test_chwirut1.o ${TAO_LIB} ${PETSC_LIB}
	${RM} test_chwirut1.o



runtest_link1: 
	-@${MPIEXEC} -np 1 ./test_link1 > test_link1_1.tmp 2>&1; \
	if (${DIFF} output/test_link1_1.out test_link1_1.tmp) then true;\
        else echo "Possible problem with test_link1_1, diffs above"; fi; \
	${RM} -f test_link1_1.tmp

runtest_linesearch1: 
	-@${MPIEXEC} -np 1 ./test_linesearch1 > test_linesearch1_1.tmp 2>&1; \
	if (${DIFF} output/test_linesearch1_1.out test_linesearch1_1.tmp) then true;\
        else echo "Possible problem with test_linesearch1_1, diffs above"; fi; \
	${RM} -f test_linesearch1_1.tmp

runtest_lmvmmat1: 
	-@${MPIEXEC} -np 1 ./test_lmvmmat1 > test_lmvmmat1_1.tmp 2>&1; \
	if (${DIFF} output/test_lmvmmat1_1.out test_lmvmmat1_1.tmp) then true;\
        else echo "Possible problem with test_lmvmmat1_1, diffs above"; fi; \
	${RM} -f test_lmvmmat1_1.tmp


runtest_rosenbrock1: 
	-@${MPIEXEC} -np 1 ./test_rosenbrock1 > test_rosenbrock1_1.tmp 2>&1; \
	if (${DIFF} output/test_rosenbrock1_1.out test_rosenbrock1_1.tmp) then true;\
        else echo "Possible problem with test_rosenbrock1_1, diffs above"; fi; \
	${RM} -f test_rosenbrock1_1.tmp


runtest_jbearing2: 
	-@${MPIEXEC} -np 2 ./test_jbearing2 > test_jbearing2_1.tmp 2>&1; \
	if (${DIFF} output/test_jbearing2_1.out test_jbearing2_1.tmp) then true;\
        else echo "Possible problem with test_jbearing2_1, diffs above"; fi; \
	${RM} -f test_jbearing2_1.tmp

runtest_plate2: 
	-@${MPIEXEC} -np 2 ./test_plate2 > test_plate2_1.tmp 2>&1; \
	if (${DIFF} output/test_plate2_1.out test_plate2_1.tmp) then true;\
        else echo "Possible problem with test_plate2_1, diffs above"; fi; \
	${RM} -f test_plate2_1.tmp

runtest_bratu2: 
	-@${MPIEXEC} -np 2 ./test_bratu2 > test_bratu2_1.tmp 2>&1; \
	if (${DIFF} output/test_bratu2_1.out test_bratu2_1.tmp) then true;\
        else echo "Possible problem with test_bratu2_1, diffs above"; fi; \
	${RM} -f test_bratu2_1.tmp

runtest_chwirut1: 
	-@${MPIEXEC} -np 2 ./test_chwirut1 > test_chwirut1_1.tmp 2>&1; \
	if (${DIFF} output/test_chwirut1_1.out test_chwirut1_1.tmp) then true;\
        else echo "Possible problem with test_chwirut1_1, diffs above"; fi; \
	${RM} -f test_chwirut1_1.tmp


